<div *ngIf="isOpen" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
  <div class="bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto">
    <!-- Header -->
    <div class="flex items-center justify-between p-6 border-b border-gray-200">
      <h3 class="text-lg font-semibold text-gray-900">Add Niche Skill</h3>
      <button
        (click)="onClose()"
        class="text-gray-400 hover:text-gray-600 transition-colors">
        <lucide-icon name="x" class="w-5 h-5"></lucide-icon>
      </button>
    </div>

    <!-- Form -->
    <form [formGroup]="skillForm" (ngSubmit)="onSubmit()" class="p-6 space-y-4">
      <!-- Skill Selection -->
      <div>
        <label for="skillSelect" class="block text-sm font-medium text-gray-700 mb-2">
          Select Skill *
        </label>
        <select
          id="skillSelect"
          formControlName="skill"
          class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
          [disabled]="loadingSkills">
          <option value="">Choose a skill...</option>
          <option *ngFor="let skill of availableSkills" [value]="skill._id">
            {{skill.name}}
          </option>
        </select>
        <div *ngIf="loadingSkills" class="text-sm text-gray-500 mt-1">
          Loading skills...
        </div>
      </div>

      <!-- Description -->
      <div>
        <label for="description" class="block text-sm font-medium text-gray-700 mb-2">
          Description *
        </label>
        <textarea
          id="description"
          formControlName="description"
          rows="3"
          class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
          [class.border-red-500]="skillForm.get('description')?.invalid && skillForm.get('description')?.touched"
          placeholder="Describe your expertise in this skill"></textarea>
        <div *ngIf="getErrorMessage('description')" class="text-sm text-red-600 mt-1">
          {{getErrorMessage('description')}}
        </div>
      </div>

      <!-- Years of Experience -->
      <div>
        <label for="yearsOfExperience" class="block text-sm font-medium text-gray-700 mb-2">
          Years of Experience *
        </label>
        <input
          type="number"
          id="yearsOfExperience"
          formControlName="yearsOfExperience"
          min="0"
          max="50"
          class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
          [class.border-red-500]="skillForm.get('yearsOfExperience')?.invalid && skillForm.get('yearsOfExperience')?.touched"
          placeholder="Enter years of experience">
        <div *ngIf="getErrorMessage('yearsOfExperience')" class="text-sm text-red-600 mt-1">
          {{getErrorMessage('yearsOfExperience')}}
        </div>
      </div>

      <!-- Proficiency Level -->
      <div>
        <label for="proficiencyLevel" class="block text-sm font-medium text-gray-700 mb-2">
          Proficiency Level *
        </label>
        <select
          id="proficiencyLevel"
          formControlName="proficiencyLevel"
          class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
          <option *ngFor="let level of proficiencyLevels" [value]="level.value">
            {{level.label}}
          </option>
        </select>
        <div *ngIf="getErrorMessage('proficiencyLevel')" class="text-sm text-red-600 mt-1">
          {{getErrorMessage('proficiencyLevel')}}
        </div>
      </div>

      <!-- Actions -->
      <div class="flex justify-end space-x-3 pt-4">
        <button
          type="button"
          (click)="onClose()"
          class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500">
          Cancel
        </button>
        <button
          type="submit"
          [disabled]="submitting || skillForm.invalid"
          class="px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed">
          <span *ngIf="submitting" class="flex items-center">
            <div class="animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"></div>
            Adding...
          </span>
          <span *ngIf="!submitting">Add Skill</span>
        </button>
      </div>
    </form>
  </div>
</div> 