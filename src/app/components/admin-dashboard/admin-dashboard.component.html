<app-layout>
  <div class="main-layout responsive-flex h-screen bg-gray-50 overflow-hidden">
    <!-- Mobile Menu Overlay -->
    <div *ngIf="showMobileMenu" 
         (click)="showMobileMenu = false"
         class="responsive-overlay lg:hidden"></div>

    <!-- Sidebar Container -->
    <div [class]="'sidebar-container shadow-sm border-r border-gray-200 responsive-flex flex-col responsive-z-60 transition-transform duration-300 ' + 
                  (showMobileMenu ? 'fixed inset-y-0 left-0 w-64 transform translate-x-0' : 
                   'fixed inset-y-0 left-0 w-64 transform -translate-x-full lg:relative lg:translate-x-0')">
      
      <!-- Sidebar Header -->
      <div class="responsive-padding-base border-b border-gray-200">
        <div class="responsive-flex items-center">
          <div class="bg-gradient-to-r from-blue-600 to-indigo-600 rounded-lg p-2">
            <img src="assets/icons/lucide/lucide/shield.svg" class="w-6 h-6 text-white" alt="Admin">
          </div>
          <div class="ml-3">
            <h2 class="responsive-text-lg font-bold text-gray-900">Admin Portal</h2>
            <p class="responsive-text-xs text-gray-400 mt-1">
              <span *ngIf="currentUser?.firstName && currentUser?.lastName">
                {{currentUser?.firstName}} {{currentUser?.lastName}}
              </span>
            </p>
          </div>
        </div>
      </div>

      <!-- Navigation Menu with Integrated Stats -->
      <nav class="nav-menu">
        <div *ngFor="let menuItem of getAvailableMenuItems()">
          <!-- Regular menu item -->
          <button
            (click)="navigateToTab(menuItem.id)"
            [class]="'nav-item ' + 
              (isActiveRoute(menuItem.route) ? 'active' : '')">
            <img [src]="'assets/icons/lucide/lucide/' + menuItem.icon" [alt]="menuItem.label">
            <span>{{menuItem.label}}</span>
          </button>
        </div>

        <!-- Stats Summary - Integrated into Navigation Menu -->
        <div class="stats-section-integrated">
          <div class="space-y-2 sm:space-y-3">
            <div class="stat-item">
              <div class="stat-content">
                <div class="stat-icon bg-blue-100">
                  <img src="assets/icons/lucide/lucide/users.svg" class="w-3 h-3 sm:w-4 sm:h-4 text-blue-600" alt="Users">
                </div>
                <span class="stat-title">Users</span>
              </div>
              <span class="stat-value">--</span>
            </div>
            <div class="stat-item">
              <div class="stat-content">
                <div class="stat-icon bg-green-100">
                  <img src="assets/icons/lucide/lucide/briefcase.svg" class="w-3 h-3 sm:w-4 sm:h-4 text-green-600" alt="Categories">
                </div>
                <span class="stat-title">Categories</span>
              </div>
              <span class="stat-value">--</span>
            </div>
            <div class="stat-item">
              <div class="stat-content">
                <div class="stat-icon bg-purple-100">
                  <img src="assets/icons/lucide/lucide/trending-up.svg" class="w-3 h-3 sm:w-4 sm:h-4 text-purple-600" alt="Applications">
                </div>
                <span class="stat-title">Applications</span>
              </div>
              <span class="stat-value">--</span>
            </div>
          </div>
        </div>
      </nav>
    </div>

    <!-- Right Content Container -->
    <div class="content-container flex-1 responsive-flex flex-col relative responsive-z-10">
      <!-- Mobile Header -->
      <div class="lg:hidden bg-white border-b border-gray-200 responsive-padding-base">
        <div class="responsive-flex items-center justify-between">
          <button
            (click)="showMobileMenu = true"
            class="responsive-mobile-menu-btn p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg">
            <img src="assets/icons/lucide/lucide/list.svg" class="w-5 h-5" alt="Menu">
          </button>
          <h1 class="responsive-text-lg font-bold text-gray-900">Admin Portal</h1>
          <div class="w-9"></div> <!-- Spacer for centering -->
        </div>
      </div>

      <!-- Content Area with Router Outlet -->
      <div class="content-area flex-1 overflow-y-auto overflow-x-hidden">
        <router-outlet></router-outlet>
      </div>
    </div>
  </div>
</app-layout>